<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SINARA ‚Äì Profil Saya</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/css/global.css">
<style>
/* ===== RESET & BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'DM Sans', sans-serif; background: var(--gray-100); color: var(--gray-600); }

/* ===== LAYOUT ===== */
.pemda-layout { display: flex; min-height: 100vh; }

/* ===== SIDEBAR ===== */
.sidebar { width: 220px; background: var(--gray-800); color: white; display: flex; flex-direction: column; position: fixed; top: 0; left: 0; bottom: 0; z-index: 100; }
.sidebar-logo { padding: 20px 20px 16px; border-bottom: 1px solid rgba(255,255,255,0.08); }
.sidebar-logo .logo-brand { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 18px; font-weight: 800; letter-spacing: 0.5px; }
.sidebar-logo .logo-sub { font-size: 10px; opacity: 0.45; margin-top: 3px; }
.sidebar-nav { flex: 1; padding: 12px 10px; overflow-y: auto; }
.nav-item { display: flex; align-items: center; padding: 9px 12px; border-radius: 8px; font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.6); cursor: pointer; transition: all 0.15s; text-decoration: none; margin-bottom: 1px; }
.nav-item:hover { background: rgba(255,255,255,0.07); color: white; }
.nav-item.active { background: var(--green); color: white; font-weight: 700; }
.nav-badge { margin-left: auto; background: var(--red); color: white; font-size: 10px; font-weight: 700; padding: 1px 6px; border-radius: 10px; font-family: 'Plus Jakarta Sans', sans-serif; }

/* ===== SIDEBAR FOOTER ===== */
.sidebar-footer { padding: 14px 16px; border-top: 1px solid rgba(255,255,255,0.08); }
.sidebar-user-wrap { position: relative; }
.sidebar-user { display: flex; align-items: center; gap: 10px; }
.sidebar-avatar { width: 34px; height: 34px; border-radius: 50%; background: var(--green); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 800; font-family: 'Plus Jakarta Sans', sans-serif; flex-shrink: 0; }
.sidebar-user-name { font-size: 13px; font-weight: 700; color: white; }
.sidebar-user-role { font-size: 11px; color: rgba(255,255,255,0.4); margin-top: 1px; }
.btn-user-menu { margin-left: auto; flex-shrink: 0; width: 28px; height: 28px; background: transparent; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.15s; }
.btn-user-menu:hover { background: rgba(255,255,255,0.1); }
.btn-user-menu svg { display: block; }
.user-dropdown { display: none; position: absolute; bottom: calc(100% + 8px); left: 0; right: 0; background: #263244; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; box-shadow: 0 8px 24px rgba(0,0,0,0.35); z-index: 200; }
.user-dropdown.open { display: block; }
a.user-dropdown-item { text-decoration: none; }
.user-dropdown-item { display: flex; align-items: center; gap: 10px; padding: 11px 14px; font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.75); cursor: pointer; transition: background 0.12s; border-bottom: 1px solid rgba(255,255,255,0.06); }
.user-dropdown-item:last-child { border-bottom: none; }
.user-dropdown-item:hover { background: rgba(255,255,255,0.07); color: white; }
.user-dropdown-item.active-menu { color: white; background: rgba(42,143,99,0.2); }
.user-dropdown-item.danger { color: #f87171; }
.user-dropdown-item.danger:hover { background: rgba(248,113,113,0.1); }
.user-dropdown-icon { width: 16px; height: 16px; flex-shrink: 0; opacity: 0.7; }

/* ===== MAIN CONTENT ===== */
.main-content { margin-left: 220px; flex: 1; background: var(--gray-100); padding: 28px; min-height: 100vh; }
.breadcrumb { font-size: 12px; color: var(--gray-400); margin-bottom: 8px; }
.breadcrumb span { color: var(--gray-600); }
.page-header { margin-bottom: 24px; }
.page-header h1 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 22px; font-weight: 800; color: var(--gray-800); margin-bottom: 3px; }
.page-header p { font-size: 13px; color: var(--gray-400); }

/* ===== PROFIL LAYOUT ===== */
.profil-wrap { max-width: 760px; margin: 0 auto; }

/* Hero Card */
.profil-hero {
  background: white; border-radius: 14px; border: 1px solid var(--gray-200);
  padding: 28px; margin-bottom: 20px;
  display: flex; align-items: center; gap: 24px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.profil-avatar-wrap { position: relative; flex-shrink: 0; }
.profil-avatar {
  width: 80px; height: 80px; border-radius: 50%;
  background: linear-gradient(135deg, var(--green), var(--green-mid));
  display: flex; align-items: center; justify-content: center;
  font-size: 28px; font-weight: 800; color: white;
  font-family: 'Plus Jakarta Sans', sans-serif;
  box-shadow: 0 4px 14px rgba(26,107,74,0.25);
}
.profil-avatar-btn {
  position: absolute; bottom: 2px; right: 2px;
  width: 24px; height: 24px; border-radius: 50%;
  background: var(--green); border: 2px solid white;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: background 0.15s;
}
.profil-avatar-btn:hover { background: var(--green-mid); }
.profil-info { flex: 1; min-width: 0; }
.profil-name { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 20px; font-weight: 800; color: var(--gray-800); margin-bottom: 4px; }
.profil-role-badge {
  display: inline-flex; align-items: center; gap: 5px;
  background: var(--green-light); color: var(--green);
  font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 20px;
  font-family: 'Plus Jakarta Sans', sans-serif; text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 12px;
}
.profil-meta { display: flex; flex-wrap: wrap; gap: 14px; }
.profil-meta-item { display: flex; align-items: center; gap: 5px; font-size: 12px; color: var(--gray-400); }
.profil-meta-item svg { flex-shrink: 0; }
.profil-meta-item span { color: var(--gray-600); }

/* Section Cards */
.profil-card {
  background: white; border-radius: 14px; border: 1px solid var(--gray-200);
  padding: 24px; margin-bottom: 16px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.profil-card-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 20px; padding-bottom: 14px; border-bottom: 1px solid var(--gray-100);
}
.profil-card-title {
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 14px; font-weight: 700; color: var(--gray-800);
  display: flex; align-items: center; gap: 8px;
}
.card-title-icon {
  width: 30px; height: 30px; border-radius: 8px;
  background: var(--green-light); display: flex; align-items: center; justify-content: center;
  font-size: 14px; flex-shrink: 0;
}
.card-actions { display: flex; gap: 8px; }
.btn-edit {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 7px 14px; border-radius: 8px;
  border: 1.5px solid var(--gray-200); background: white;
  font-size: 12px; font-weight: 600; color: var(--gray-600);
  cursor: pointer; transition: all 0.15s; font-family: 'DM Sans', sans-serif;
}
.btn-edit:hover { border-color: var(--green-mid); color: var(--green); background: var(--green-light); }
.btn-save {
  display: none; align-items: center; gap: 6px;
  padding: 7px 14px; border-radius: 8px;
  border: none; background: var(--green);
  font-size: 12px; font-weight: 600; color: white;
  cursor: pointer; transition: background 0.15s; font-family: 'DM Sans', sans-serif;
}
.btn-save:hover { background: var(--green-mid); }
.btn-save.visible { display: inline-flex; }

/* Field Grid */
.field-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.field-label { font-size: 11px; font-weight: 600; color: var(--gray-400); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 5px; }
.field-value { font-size: 13px; color: var(--gray-800); font-weight: 500; padding: 10px 12px; background: var(--gray-50); border-radius: 8px; line-height: 1.4; }
.field-input {
  display: none; width: 100%; padding: 10px 12px;
  border: 1.5px solid var(--gray-200); border-radius: 8px;
  font-size: 13px; font-family: 'DM Sans', sans-serif; color: var(--gray-800);
  background: white; transition: border-color 0.15s;
}
.field-input:focus { outline: none; border-color: var(--green-mid); }
.editing .field-value { display: none; }
.editing .field-input { display: block; }

/* Status badge */
.badge-active { display: inline-flex; align-items: center; gap: 5px; color: var(--green); font-weight: 600; }
.badge-active::before { content: ''; width: 7px; height: 7px; border-radius: 50%; background: var(--green); display: inline-block; }

/* Activity List */
.activity-list { display: flex; flex-direction: column; gap: 0; }
.activity-item {
  display: flex; align-items: flex-start; gap: 14px;
  padding: 14px 0; border-bottom: 1px solid var(--gray-100);
}
.activity-item:last-child { border-bottom: none; }
.activity-icon {
  width: 36px; height: 36px; border-radius: 10px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; font-size: 16px;
}
.activity-icon.green { background: var(--green-light); }
.activity-icon.blue { background: var(--blue-soft); }
.activity-icon.yellow { background: var(--accent-soft); }
.activity-content { flex: 1; min-width: 0; }
.activity-title { font-size: 13px; font-weight: 600; color: var(--gray-800); margin-bottom: 2px; }
.activity-desc { font-size: 12px; color: var(--gray-400); line-height: 1.4; }
.activity-time { font-size: 11px; color: var(--gray-400); flex-shrink: 0; margin-top: 2px; white-space: nowrap; }

/* Ganti PW Link */
.link-ganti-pw {
  display: inline-flex; align-items: center; gap: 7px;
  font-size: 13px; font-weight: 600; color: var(--green); text-decoration: none;
  padding: 9px 14px; border-radius: 8px; border: 1.5px solid var(--green-light);
  background: var(--green-light); transition: all 0.15s;
}
.link-ganti-pw:hover { background: var(--green); color: white; border-color: var(--green); }

/* Toast */
.toast {
  display: none; position: fixed; bottom: 24px; right: 24px;
  background: var(--gray-800); color: white; padding: 12px 18px;
  border-radius: 10px; font-size: 13px; font-weight: 500;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  align-items: center; gap: 10px; z-index: 999;
}
.toast.show { display: flex; animation: toastIn 0.25s ease; }
.toast-icon { width: 20px; height: 20px; border-radius: 50%; background: var(--green); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
@keyframes toastIn { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
</style>
</head>
<body>

<div class="pemda-layout">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-brand">SINARA</div>
      <div class="logo-sub">Kota Depok ¬∑ 2025</div>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-item" href="dashboard.html">Dashboard</a>
      <a class="nav-item" href="data-ri.html">Data Rumah Ibadah</a>
      <a class="nav-item" href="verifikasi.html">Verifikasi <span class="nav-badge">7</span></a>
      <a class="nav-item" href="anggaran.html">Anggaran</a>
      <a class="nav-item" href="laporan.html">Laporan</a>
    </nav>
    <div class="sidebar-footer">
      <div class="sidebar-user-wrap">
        <div class="user-dropdown" id="userDropdown">
          <a class="user-dropdown-item active-menu" href="profil.html">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 13c0-2.5 2.7-4 6-4s6 1.5 6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Profil Saya
          </a>
          <a class="user-dropdown-item" href="ganti-password.html">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><rect x="3" y="7" width="10" height="7" rx="1.5" stroke="currentColor" stroke-width="1.5"/><path d="M5 7V5a3 3 0 0 1 6 0v2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Ganti Password
          </a>
          <div class="user-dropdown-item danger" onclick="logout()">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><path d="M6 2H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M10 11l3-3-3-3M13 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Keluar
          </div>
        </div>
        <div class="sidebar-user">
          <div class="sidebar-avatar" id="sidebarAvatar">BD</div>
          <div style="flex:1;min-width:0;overflow:hidden;">
            <div class="sidebar-user-name" id="sidebarName">Budi Darma</div>
            <div class="sidebar-user-role">Admin Pemkot</div>
          </div>
          <button class="btn-user-menu" onclick="toggleUserMenu(event)" title="Menu akun">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <circle cx="8" cy="3" r="1.2" fill="rgba(255,255,255,0.6)"/>
              <circle cx="8" cy="8" r="1.2" fill="rgba(255,255,255,0.6)"/>
              <circle cx="8" cy="13" r="1.2" fill="rgba(255,255,255,0.6)"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <div class="breadcrumb">Dashboard <span>/ Profil Saya</span></div>
    <div class="page-header">
      <h1>Profil Saya</h1>
      <p>Kelola informasi akun dan data pribadi Anda</p>
    </div>

    <div class="profil-wrap">

      <!-- HERO -->
      <div class="profil-hero">
        <div class="profil-avatar-wrap">
          <div class="profil-avatar" id="heroAvatar">BD</div>
          <div class="profil-avatar-btn" title="Ganti foto" onclick="document.getElementById('avatarInput').click()">
            <svg width="11" height="11" viewBox="0 0 16 16" fill="none"><path d="M2 13.5h12M10.5 2.5l3 3-7.5 7.5H3v-3l7.5-7.5z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <input type="file" id="avatarInput" accept="image/*" style="display:none" onchange="handleAvatar(this)">
        </div>
        <div class="profil-info">
          <div class="profil-name" id="heroName">Budi Darma</div>
          <div class="profil-role-badge">‚ú¶ Admin Pemkot Depok</div>
          <div class="profil-meta">
            <div class="profil-meta-item">
              <svg width="13" height="13" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="1.5" stroke="currentColor" stroke-width="1.5"/><path d="M2 6h12" stroke="currentColor" stroke-width="1.3"/></svg>
              <span id="heroEmail">budi.darma@depok.go.id</span>
            </div>
            <div class="profil-meta-item">
              <svg width="13" height="13" viewBox="0 0 16 16" fill="none"><rect x="3" y="2" width="10" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M6 6h4M6 9h4M6 12h2" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>
              <span>Dinas Kesbangpol</span>
            </div>
            <div class="profil-meta-item">
              <svg width="13" height="13" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/><path d="M8 5v3.5l2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
              <span>Bergabung Januari 2024</span>
            </div>
          </div>
        </div>
      </div>

      <!-- DATA DIRI -->
      <div class="profil-card" id="cardDiri">
        <div class="profil-card-header">
          <div class="profil-card-title">
            <div class="card-title-icon">üë§</div>
            Data Diri
          </div>
          <div class="card-actions">
            <button class="btn-edit" id="btnEditDiri" onclick="toggleEdit('cardDiri','btnEditDiri','btnSaveDiri')">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M2 13.5h12M10.5 2.5l3 3-7.5 7.5H3v-3l7.5-7.5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Edit
            </button>
            <button class="btn-save" id="btnSaveDiri" onclick="saveSection('cardDiri','btnEditDiri','btnSaveDiri','dataDiri')">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M3 8.5l3.5 3.5L13 4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Simpan
            </button>
          </div>
        </div>
        <div class="field-grid">
          <div class="field-item">
            <div class="field-label">Nama Lengkap</div>
            <div class="field-value" id="valNama">Budi Darma</div>
            <input class="field-input" id="inpNama" type="text" value="Budi Darma">
          </div>
          <div class="field-item">
            <div class="field-label">NIP</div>
            <div class="field-value">196804121994031008</div>
            <input class="field-input" type="text" value="196804121994031008">
          </div>
          <div class="field-item">
            <div class="field-label">Jabatan</div>
            <div class="field-value">Kepala Seksi Kerukunan Umat Beragama</div>
            <input class="field-input" type="text" value="Kepala Seksi Kerukunan Umat Beragama">
          </div>
          <div class="field-item">
            <div class="field-label">Unit / Dinas</div>
            <div class="field-value">Dinas Kesatuan Bangsa dan Politik</div>
            <input class="field-input" type="text" value="Dinas Kesatuan Bangsa dan Politik">
          </div>
          <div class="field-item">
            <div class="field-label">Nomor HP / WA</div>
            <div class="field-value">0812-3456-7890</div>
            <input class="field-input" type="tel" value="0812-3456-7890">
          </div>
          <div class="field-item">
            <div class="field-label">Golongan / Pangkat</div>
            <div class="field-value">III/d ‚Äî Penata Tingkat I</div>
            <input class="field-input" type="text" value="III/d ‚Äî Penata Tingkat I">
          </div>
        </div>
      </div>

      <!-- DATA AKUN -->
      <div class="profil-card" id="cardAkun">
        <div class="profil-card-header">
          <div class="profil-card-title">
            <div class="card-title-icon">üîê</div>
            Data Akun
          </div>
          <div class="card-actions">
            <button class="btn-edit" id="btnEditAkun" onclick="toggleEdit('cardAkun','btnEditAkun','btnSaveAkun')">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M2 13.5h12M10.5 2.5l3 3-7.5 7.5H3v-3l7.5-7.5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Edit
            </button>
            <button class="btn-save" id="btnSaveAkun" onclick="saveSection('cardAkun','btnEditAkun','btnSaveAkun','dataAkun')">
              <svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M3 8.5l3.5 3.5L13 4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Simpan
            </button>
          </div>
        </div>
        <div class="field-grid">
          <div class="field-item">
            <div class="field-label">Email Login</div>
            <div class="field-value" id="valEmail">budi.darma@depok.go.id</div>
            <input class="field-input" id="inpEmail" type="email" value="budi.darma@depok.go.id">
          </div>
          <div class="field-item">
            <div class="field-label">Peran Akun</div>
            <div class="field-value" style="color:var(--green);font-weight:600;">Admin Pemkot Depok</div>
            <input class="field-input" type="text" value="Admin Pemkot Depok" disabled style="opacity:0.5;">
          </div>
          <div class="field-item">
            <div class="field-label">Status Akun</div>
            <div class="field-value"><span class="badge-active">Aktif</span></div>
            <input class="field-input" type="text" value="Aktif" disabled style="opacity:0.5;">
          </div>
          <div class="field-item">
            <div class="field-label">Terakhir Login</div>
            <div class="field-value">Hari ini, 08:42 WIB</div>
            <input class="field-input" type="text" value="Hari ini, 08:42 WIB" disabled style="opacity:0.5;">
          </div>
        </div>
        <div style="margin-top:20px;padding-top:16px;border-top:1px solid var(--gray-100);">
          <a href="ganti-password.html" class="link-ganti-pw">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><rect x="3" y="7" width="10" height="7" rx="1.5" stroke="currentColor" stroke-width="1.5"/><path d="M5 7V5a3 3 0 0 1 6 0v2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Ganti Password
          </a>
        </div>
      </div>

      <!-- AKTIVITAS TERAKHIR -->
      <div class="profil-card">
        <div class="profil-card-header" style="margin-bottom:4px;border-bottom:none;padding-bottom:0;">
          <div class="profil-card-title">
            <div class="card-title-icon">üìã</div>
            Aktivitas Terakhir
          </div>
        </div>
        <div style="padding-top:16px;">
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-icon green">‚úÖ</div>
              <div class="activity-content">
                <div class="activity-title">Verifikasi Mushola Al-Hikmah</div>
                <div class="activity-desc">Permohonan bantuan disetujui dan diteruskan ke tahap survei lapangan</div>
              </div>
              <div class="activity-time">2 jam lalu</div>
            </div>
            <div class="activity-item">
              <div class="activity-icon blue">üìä</div>
              <div class="activity-content">
                <div class="activity-title">Ekspor Laporan Q1 2025</div>
                <div class="activity-desc">Laporan realisasi bantuan kuartal pertama berhasil diekspor</div>
              </div>
              <div class="activity-time">Kemarin</div>
            </div>
            <div class="activity-item">
              <div class="activity-icon yellow">üìù</div>
              <div class="activity-content">
                <div class="activity-title">Update Anggaran Kecamatan Sukmajaya</div>
                <div class="activity-desc">Alokasi anggaran diperbarui menjadi Rp 420.000.000</div>
              </div>
              <div class="activity-time">3 hari lalu</div>
            </div>
            <div class="activity-item">
              <div class="activity-icon green">üèõÔ∏è</div>
              <div class="activity-content">
                <div class="activity-title">Tambah Data Pura Tirta Dharma</div>
                <div class="activity-desc">Pendaftaran rumah ibadah baru berhasil diverifikasi</div>
              </div>
              <div class="activity-time">5 hari lalu</div>
            </div>
          </div>
        </div>
      </div>

    </div><!-- /profil-wrap -->
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <div class="toast-icon">
    <svg width="11" height="11" viewBox="0 0 16 16" fill="none"><path d="M3 8.5l3.5 3.5L13 4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </div>
  <span id="toastMsg">Berhasil disimpan</span>
</div>

<script>
// USER MENU
function toggleUserMenu(e) {
  e.stopPropagation();
  document.getElementById('userDropdown').classList.toggle('open');
}
function closeUserMenu() {
  document.getElementById('userDropdown').classList.remove('open');
}
function logout() {
  document.getElementById('userDropdown').classList.remove('open');
  window.location.href = 'login.html';
}
document.addEventListener('click', () => document.getElementById('userDropdown').classList.remove('open'));

// EDIT / SAVE
function toggleEdit(cardId, btnEditId, btnSaveId) {
  document.getElementById(cardId).classList.add('editing');
  document.getElementById(btnEditId).style.display = 'none';
  document.getElementById(btnSaveId).classList.add('visible');
}

function saveSection(cardId, btnEditId, btnSaveId, type) {
  const card = document.getElementById(cardId);
  // Sync field-value from input
  card.querySelectorAll('.field-item').forEach(item => {
    const val = item.querySelector('.field-value');
    const inp = item.querySelector('.field-input:not([disabled])');
    if (val && inp) val.textContent = inp.value;
  });

  if (type === 'dataDiri') {
    const nama = document.getElementById('inpNama').value;
    document.getElementById('heroName').textContent = nama;
    document.getElementById('valNama').textContent = nama;
    const initials = nama.split(' ').map(w => w[0]).join('').substring(0,2).toUpperCase();
    document.getElementById('heroAvatar').textContent = initials;
    document.getElementById('sidebarAvatar').textContent = initials;
    document.getElementById('sidebarName').textContent = nama;
  }
  if (type === 'dataAkun') {
    const email = document.getElementById('inpEmail').value;
    document.getElementById('heroEmail').textContent = email;
    document.getElementById('valEmail').textContent = email;
  }

  card.classList.remove('editing');
  document.getElementById(btnEditId).style.display = '';
  document.getElementById(btnSaveId).classList.remove('visible');
  showToast('Perubahan berhasil disimpan');
}

// AVATAR
function handleAvatar(input) {
  if (!input.files[0]) return;
  const reader = new FileReader();
  reader.onload = e => {
    const av = document.getElementById('heroAvatar');
    av.style.backgroundImage = `url(${e.target.result})`;
    av.style.backgroundSize = 'cover';
    av.style.backgroundPosition = 'center';
    av.textContent = '';
  };
  reader.readAsDataURL(input.files[0]);
  showToast('Foto profil berhasil diperbarui');
}

// TOAST
function showToast(msg) {
  const t = document.getElementById('toast');
  document.getElementById('toastMsg').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}
</script>
</body>
</html>
