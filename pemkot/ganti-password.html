<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SINARA ‚Äì Ganti Password</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/css/global.css">
<style>
/* ===== RESET & BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'DM Sans', sans-serif; background: var(--gray-100); color: var(--gray-600); }

/* ===== LAYOUT ===== */
.pemda-layout { display: flex; min-height: 100vh; }

/* ===== SIDEBAR ===== */
.sidebar { width: 220px; background: var(--gray-800); color: white; display: flex; flex-direction: column; position: fixed; top: 0; left: 0; bottom: 0; z-index: 100; }
.sidebar-logo { padding: 20px 20px 16px; border-bottom: 1px solid rgba(255,255,255,0.08); }
.sidebar-logo .logo-brand { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 18px; font-weight: 800; letter-spacing: 0.5px; }
.sidebar-logo .logo-sub { font-size: 10px; opacity: 0.45; margin-top: 3px; }
.sidebar-nav { flex: 1; padding: 12px 10px; overflow-y: auto; }
.nav-item { display: flex; align-items: center; padding: 9px 12px; border-radius: 8px; font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.6); cursor: pointer; transition: all 0.15s; text-decoration: none; margin-bottom: 1px; }
.nav-item:hover { background: rgba(255,255,255,0.07); color: white; }
.nav-item.active { background: var(--green); color: white; font-weight: 700; }
.nav-badge { margin-left: auto; background: var(--red); color: white; font-size: 10px; font-weight: 700; padding: 1px 6px; border-radius: 10px; font-family: 'Plus Jakarta Sans', sans-serif; }

/* ===== SIDEBAR FOOTER ===== */
.sidebar-footer { padding: 14px 16px; border-top: 1px solid rgba(255,255,255,0.08); }
.sidebar-user-wrap { position: relative; }
.sidebar-user { display: flex; align-items: center; gap: 10px; }
.sidebar-avatar { width: 34px; height: 34px; border-radius: 50%; background: var(--green); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 800; font-family: 'Plus Jakarta Sans', sans-serif; flex-shrink: 0; }
.sidebar-user-name { font-size: 13px; font-weight: 700; color: white; }
.sidebar-user-role { font-size: 11px; color: rgba(255,255,255,0.4); margin-top: 1px; }
.btn-user-menu { margin-left: auto; flex-shrink: 0; width: 28px; height: 28px; background: transparent; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.15s; }
.btn-user-menu:hover { background: rgba(255,255,255,0.1); }
.btn-user-menu svg { display: block; }
.user-dropdown { display: none; position: absolute; bottom: calc(100% + 8px); left: 0; right: 0; background: #263244; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; box-shadow: 0 8px 24px rgba(0,0,0,0.35); z-index: 200; }
.user-dropdown.open { display: block; }
a.user-dropdown-item { text-decoration: none; }
.user-dropdown-item { display: flex; align-items: center; gap: 10px; padding: 11px 14px; font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.75); cursor: pointer; transition: background 0.12s; border-bottom: 1px solid rgba(255,255,255,0.06); }
.user-dropdown-item:last-child { border-bottom: none; }
.user-dropdown-item:hover { background: rgba(255,255,255,0.07); color: white; }
.user-dropdown-item.active-menu { color: white; background: rgba(42,143,99,0.2); }
.user-dropdown-item.danger { color: #f87171; }
.user-dropdown-item.danger:hover { background: rgba(248,113,113,0.1); }
.user-dropdown-icon { width: 16px; height: 16px; flex-shrink: 0; opacity: 0.7; }

/* ===== MAIN CONTENT ===== */
.main-content { margin-left: 220px; flex: 1; background: var(--gray-100); padding: 28px; min-height: 100vh; }
.breadcrumb { font-size: 12px; color: var(--gray-400); margin-bottom: 8px; }
.breadcrumb a { color: var(--gray-400); text-decoration: none; }
.breadcrumb a:hover { color: var(--green); }
.breadcrumb span { color: var(--gray-600); }
.page-header { margin-bottom: 24px; }
.page-header h1 { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 22px; font-weight: 800; color: var(--gray-800); margin-bottom: 3px; }
.page-header p { font-size: 13px; color: var(--gray-400); }

/* ===== GANTI PASSWORD LAYOUT ===== */
.gp-wrap { max-width: 540px; margin: 0 auto; }

.gp-card {
  background: white; border-radius: 14px; border: 1px solid var(--gray-200);
  padding: 28px; margin-bottom: 16px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.gp-card-header {
  display: flex; align-items: center; gap: 14px;
  margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid var(--gray-100);
}
.gp-card-icon {
  width: 46px; height: 46px; border-radius: 12px; flex-shrink: 0;
  background: var(--green-light); display: flex; align-items: center; justify-content: center;
  font-size: 20px;
}
.gp-card-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 16px; font-weight: 800; color: var(--gray-800); }
.gp-card-sub { font-size: 12px; color: var(--gray-400); margin-top: 2px; }

/* Form fields */
.gp-field { margin-bottom: 18px; }
.gp-label { display: block; font-size: 12px; font-weight: 600; color: var(--gray-600); margin-bottom: 7px; }
.gp-label .req { color: var(--red); }
.gp-input-wrap { position: relative; }
.gp-input {
  width: 100%; padding: 11px 42px 11px 14px;
  border: 1.5px solid var(--gray-200); border-radius: 10px;
  font-size: 13px; font-family: 'DM Sans', sans-serif;
  color: var(--gray-800); background: var(--gray-50);
  transition: border-color 0.15s;
}
.gp-input:focus { outline: none; border-color: var(--green-mid); background: white; }
.gp-input.is-error { border-color: var(--red); background: var(--red-soft); }
.gp-input.is-ok { border-color: var(--green-mid); }
.gp-toggle {
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  background: none; border: none; cursor: pointer; color: var(--gray-400);
  display: flex; align-items: center; padding: 0;
  transition: color 0.15s;
}
.gp-toggle:hover { color: var(--gray-600); }
.gp-hint { font-size: 11px; margin-top: 5px; color: var(--gray-400); }
.gp-error { font-size: 11px; margin-top: 5px; color: var(--red); display: none; }
.gp-error.show { display: block; }
.gp-ok { font-size: 11px; margin-top: 5px; color: var(--green); display: none; }
.gp-ok.show { display: block; }

/* Divider */
.gp-divider { height: 1px; background: var(--gray-100); margin: 4px 0 20px; }

/* Strength */
.strength-bar { display: flex; gap: 4px; margin-top: 8px; }
.s-seg { flex: 1; height: 3px; border-radius: 2px; background: var(--gray-200); transition: background 0.25s; }
.strength-label { font-size: 11px; margin-top: 5px; color: var(--gray-400); }

/* Rules */
.pw-rules { margin-top: 12px; display: flex; flex-direction: column; gap: 6px; }
.pw-rule { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--gray-400); transition: color 0.2s; }
.pw-rule.ok { color: var(--green); }
.pw-rule-check {
  width: 16px; height: 16px; border-radius: 50%; flex-shrink: 0;
  border: 1.5px solid var(--gray-200); display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.pw-rule.ok .pw-rule-check { background: var(--green); border-color: var(--green); }

/* Submit button */
.btn-submit {
  width: 100%; padding: 13px;
  background: var(--green); color: white;
  border: none; border-radius: 10px;
  font-size: 14px; font-weight: 700; font-family: 'Plus Jakarta Sans', sans-serif;
  cursor: pointer; transition: all 0.15s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  margin-bottom: 14px;
}
.btn-submit:hover:not(:disabled) { background: var(--green-mid); }
.btn-submit:disabled { background: var(--gray-200); color: var(--gray-400); cursor: not-allowed; }

.btn-back-link {
  display: flex; align-items: center; justify-content: center; gap: 6px;
  font-size: 13px; font-weight: 600; color: var(--gray-400); text-decoration: none;
  transition: color 0.15s;
}
.btn-back-link:hover { color: var(--green); }

/* Success state */
.success-state {
  display: none; text-align: center; padding: 20px 0;
}
.success-icon { font-size: 48px; margin-bottom: 14px; }
.success-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 20px; font-weight: 800; color: var(--gray-800); margin-bottom: 8px; }
.success-desc { font-size: 13px; color: var(--gray-400); line-height: 1.6; margin-bottom: 24px; }
.btn-to-profil {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 12px 24px; background: var(--green); color: white;
  border-radius: 10px; font-size: 14px; font-weight: 700;
  font-family: 'Plus Jakarta Sans', sans-serif; text-decoration: none;
  transition: background 0.15s;
}
.btn-to-profil:hover { background: var(--green-mid); }

/* Tips card */
.tips-card {
  background: var(--blue-soft); border: 1px solid #c3d9ff;
  border-radius: 14px; padding: 18px 20px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.tips-title {
  display: flex; align-items: center; gap: 8px;
  font-size: 13px; font-weight: 700; color: #2558b0; margin-bottom: 12px;
}
.tips-list { list-style: none; display: flex; flex-direction: column; gap: 7px; }
.tips-list li {
  font-size: 12px; color: #3d6fa8; padding-left: 16px; position: relative; line-height: 1.5;
}
.tips-list li::before { content: '‚Ä¢'; position: absolute; left: 0; font-weight: 700; }
</style>
</head>
<body>

<div class="pemda-layout">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-brand">SINARA</div>
      <div class="logo-sub">Kota Depok ¬∑ 2025</div>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-item" href="dashboard.html">Dashboard</a>
      <a class="nav-item" href="data-ri.html">Data Rumah Ibadah</a>
      <a class="nav-item" href="verifikasi.html">Verifikasi <span class="nav-badge">7</span></a>
      <a class="nav-item" href="anggaran.html">Anggaran</a>
      <a class="nav-item" href="laporan.html">Laporan</a>
    </nav>
    <div class="sidebar-footer">
      <div class="sidebar-user-wrap">
        <div class="user-dropdown" id="userDropdown">
          <a class="user-dropdown-item" href="profil.html">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 13c0-2.5 2.7-4 6-4s6 1.5 6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Profil Saya
          </a>
          <a class="user-dropdown-item active-menu" href="ganti-password.html">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><rect x="3" y="7" width="10" height="7" rx="1.5" stroke="currentColor" stroke-width="1.5"/><path d="M5 7V5a3 3 0 0 1 6 0v2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Ganti Password
          </a>
          <div class="user-dropdown-item danger" onclick="logout()">
            <svg class="user-dropdown-icon" viewBox="0 0 16 16" fill="none"><path d="M6 2H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M10 11l3-3-3-3M13 8H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Keluar
          </div>
        </div>
        <div class="sidebar-user">
          <div class="sidebar-avatar">BD</div>
          <div style="flex:1;min-width:0;overflow:hidden;">
            <div class="sidebar-user-name">Budi Darma</div>
            <div class="sidebar-user-role">Admin Pemkot</div>
          </div>
          <button class="btn-user-menu" onclick="toggleUserMenu(event)" title="Menu akun">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <circle cx="8" cy="3" r="1.2" fill="rgba(255,255,255,0.6)"/>
              <circle cx="8" cy="8" r="1.2" fill="rgba(255,255,255,0.6)"/>
              <circle cx="8" cy="13" r="1.2" fill="rgba(255,255,255,0.6)"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <div class="breadcrumb">
      Dashboard <span>/ <a href="profil.html">Profil Saya</a> / Ganti Password</span>
    </div>
    <div class="page-header">
      <h1>Ganti Password</h1>
      <p>Perbarui kata sandi akun SINARA Anda secara berkala untuk keamanan</p>
    </div>

    <div class="gp-wrap">

      <!-- FORM CARD -->
      <div class="gp-card">
        <div class="gp-card-header">
          <div class="gp-card-icon">üîê</div>
          <div>
            <div class="gp-card-title">Ubah Kata Sandi</div>
            <div class="gp-card-sub">Minimal 8 karakter, kombinasi huruf besar, kecil, dan angka</div>
          </div>
        </div>

        <!-- FORM STATE -->
        <div id="formState">

          <!-- Password Lama -->
          <div class="gp-field">
            <label class="gp-label">Password Saat Ini <span class="req">*</span></label>
            <div class="gp-input-wrap">
              <input class="gp-input" type="password" id="pwLama" placeholder="Masukkan password saat ini" oninput="checkLama()">
              <button type="button" class="gp-toggle" onclick="toggleVis('pwLama',this)" tabindex="-1" aria-label="Tampilkan password">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M1 8s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5z" stroke="currentColor" stroke-width="1.4"/><circle cx="8" cy="8" r="2.5" stroke="currentColor" stroke-width="1.4"/></svg>
              </button>
            </div>
            <div class="gp-error" id="errLama">Password saat ini tidak sesuai</div>
          </div>

          <div class="gp-divider"></div>

          <!-- Password Baru -->
          <div class="gp-field">
            <label class="gp-label">Password Baru <span class="req">*</span></label>
            <div class="gp-input-wrap">
              <input class="gp-input" type="password" id="pwBaru" placeholder="Buat password baru" oninput="checkStrength();checkMatch()">
              <button type="button" class="gp-toggle" onclick="toggleVis('pwBaru',this)" tabindex="-1" aria-label="Tampilkan password">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M1 8s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5z" stroke="currentColor" stroke-width="1.4"/><circle cx="8" cy="8" r="2.5" stroke="currentColor" stroke-width="1.4"/></svg>
              </button>
            </div>
            <div class="strength-bar">
              <div class="s-seg" id="s0"></div>
              <div class="s-seg" id="s1"></div>
              <div class="s-seg" id="s2"></div>
              <div class="s-seg" id="s3"></div>
            </div>
            <div class="strength-label" id="sLabel"></div>
            <div class="pw-rules">
              <div class="pw-rule" id="rLen">
                <div class="pw-rule-check"><svg width="8" height="8" viewBox="0 0 10 10" fill="none"><path d="M2 5.5l2.5 2.5L8 3" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                Minimal 8 karakter
              </div>
              <div class="pw-rule" id="rUpper">
                <div class="pw-rule-check"><svg width="8" height="8" viewBox="0 0 10 10" fill="none"><path d="M2 5.5l2.5 2.5L8 3" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                Mengandung huruf kapital (A‚ÄìZ)
              </div>
              <div class="pw-rule" id="rLower">
                <div class="pw-rule-check"><svg width="8" height="8" viewBox="0 0 10 10" fill="none"><path d="M2 5.5l2.5 2.5L8 3" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                Mengandung huruf kecil (a‚Äìz)
              </div>
              <div class="pw-rule" id="rNum">
                <div class="pw-rule-check"><svg width="8" height="8" viewBox="0 0 10 10" fill="none"><path d="M2 5.5l2.5 2.5L8 3" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                Mengandung angka (0‚Äì9)
              </div>
            </div>
          </div>

          <!-- Konfirmasi -->
          <div class="gp-field" style="margin-bottom:26px;">
            <label class="gp-label">Konfirmasi Password Baru <span class="req">*</span></label>
            <div class="gp-input-wrap">
              <input class="gp-input" type="password" id="pwKonfirm" placeholder="Ulangi password baru" oninput="checkMatch()">
              <button type="button" class="gp-toggle" onclick="toggleVis('pwKonfirm',this)" tabindex="-1" aria-label="Tampilkan password">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M1 8s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5z" stroke="currentColor" stroke-width="1.4"/><circle cx="8" cy="8" r="2.5" stroke="currentColor" stroke-width="1.4"/></svg>
              </button>
            </div>
            <div class="gp-error" id="errMatch">Password tidak sama, periksa kembali</div>
            <div class="gp-ok" id="okMatch">‚úì Password cocok</div>
          </div>

          <button class="btn-submit" id="btnSubmit" onclick="doSubmit()" disabled>
            <svg width="15" height="15" viewBox="0 0 16 16" fill="none"><rect x="3" y="7" width="10" height="7" rx="1.5" stroke="currentColor" stroke-width="1.5"/><path d="M5 7V5a3 3 0 0 1 6 0v2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Ganti Password
          </button>
          <a href="profil.html" class="btn-back-link">
            <svg width="13" height="13" viewBox="0 0 16 16" fill="none"><path d="M10 13L5 8l5-5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Kembali ke Profil
          </a>
        </div>

        <!-- SUCCESS STATE -->
        <div class="success-state" id="successState">
          <div class="success-icon">üéâ</div>
          <div class="success-title">Password Berhasil Diubah!</div>
          <div class="success-desc">
            Password akun Anda telah berhasil diperbarui.<br>
            Gunakan password baru saat login berikutnya.
          </div>
          <a href="profil.html" class="btn-to-profil">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 13c0-2.5 2.7-4 6-4s6 1.5 6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            Kembali ke Profil
          </a>
        </div>
      </div>

      <!-- TIPS CARD -->
      <div class="tips-card" id="tipsCard">
        <div class="tips-title">
          <svg width="15" height="15" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="6" stroke="#3d6fa8" stroke-width="1.5"/><path d="M8 7.5v4M8 5.5v.5" stroke="#3d6fa8" stroke-width="1.5" stroke-linecap="round"/></svg>
          Tips Keamanan Password
        </div>
        <ul class="tips-list">
          <li>Jangan gunakan tanggal lahir, nama, atau informasi yang mudah ditebak</li>
          <li>Gunakan kombinasi unik yang tidak digunakan di platform lain</li>
          <li>Ganti password secara berkala, minimal setiap 3 bulan sekali</li>
          <li>Jangan bagikan password kepada siapapun, termasuk sesama rekan kerja</li>
          <li>Segera hubungi admin sistem jika mencurigai akun Anda telah diakses pihak lain</li>
        </ul>
      </div>

    </div><!-- /gp-wrap -->
  </div>
</div>

<script>
// USER MENU
function toggleUserMenu(e) {
  e.stopPropagation();
  document.getElementById('userDropdown').classList.toggle('open');
}
function closeUserMenu() {
  document.getElementById('userDropdown').classList.remove('open');
}
function logout() {
  document.getElementById('userDropdown').classList.remove('open');
  window.location.href = 'login.html';
}
document.addEventListener('click', () => document.getElementById('userDropdown').classList.remove('open'));

// TOGGLE VISIBILITY
const eyeOpen = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M1 8s2.5-5 7-5 7 5 7 5-2.5 5-7 5-7-5-7-5z" stroke="currentColor" stroke-width="1.4"/><circle cx="8" cy="8" r="2.5" stroke="currentColor" stroke-width="1.4"/></svg>`;
const eyeClose = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2l12 12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/><path d="M6.5 6.8A2.5 2.5 0 0 0 10 10.5M4.5 4.5C2.5 5.8 1 8 1 8s2.5 5 7 5c1.4 0 2.7-.4 3.8-1M7 3.1C7.3 3 7.7 3 8 3c4.5 0 7 5 7 5s-.7 1.4-2 2.8" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>`;

function toggleVis(id, btn) {
  const inp = document.getElementById(id);
  const isHidden = inp.type === 'password';
  inp.type = isHidden ? 'text' : 'password';
  btn.innerHTML = isHidden ? eyeClose : eyeOpen;
}

// STRENGTH
const COLORS = ['#e05252','#f0a500','#3a7bd5','#1a6b4a'];
const LABELS = ['','Lemah','Cukup','Kuat','Sangat Kuat'];

function checkStrength() {
  const pw = document.getElementById('pwBaru').value;
  const r = { len: pw.length >= 8, upper: /[A-Z]/.test(pw), lower: /[a-z]/.test(pw), num: /[0-9]/.test(pw) };
  document.getElementById('rLen').classList.toggle('ok', r.len);
  document.getElementById('rUpper').classList.toggle('ok', r.upper);
  document.getElementById('rLower').classList.toggle('ok', r.lower);
  document.getElementById('rNum').classList.toggle('ok', r.num);
  const score = Object.values(r).filter(Boolean).length;
  for (let i = 0; i < 4; i++) {
    document.getElementById('s'+i).style.background = i < score ? COLORS[score-1] : 'var(--gray-200)';
  }
  const lbl = document.getElementById('sLabel');
  lbl.textContent = pw.length ? LABELS[score] : '';
  lbl.style.color = score > 0 ? COLORS[score-1] : '';
  updateBtn();
}

// MATCH
function checkMatch() {
  const baru = document.getElementById('pwBaru').value;
  const konfirm = document.getElementById('pwKonfirm').value;
  const inp = document.getElementById('pwKonfirm');
  if (!konfirm) {
    inp.classList.remove('is-error','is-ok');
    document.getElementById('errMatch').classList.remove('show');
    document.getElementById('okMatch').classList.remove('show');
  } else if (baru !== konfirm) {
    inp.classList.add('is-error'); inp.classList.remove('is-ok');
    document.getElementById('errMatch').classList.add('show');
    document.getElementById('okMatch').classList.remove('show');
  } else {
    inp.classList.remove('is-error'); inp.classList.add('is-ok');
    document.getElementById('errMatch').classList.remove('show');
    document.getElementById('okMatch').classList.add('show');
  }
  updateBtn();
}

// CHECK LAMA (simulasi: Admin123)
function checkLama() {
  const lama = document.getElementById('pwLama').value;
  const inp = document.getElementById('pwLama');
  const err = document.getElementById('errLama');
  if (lama.length > 0 && lama !== 'Admin123') {
    inp.classList.add('is-error'); err.classList.add('show');
  } else {
    inp.classList.remove('is-error'); err.classList.remove('show');
    if (lama.length > 0) inp.classList.add('is-ok'); else inp.classList.remove('is-ok');
  }
  updateBtn();
}

// ENABLE/DISABLE SUBMIT
function updateBtn() {
  const lama = document.getElementById('pwLama').value;
  const baru = document.getElementById('pwBaru').value;
  const konfirm = document.getElementById('pwKonfirm').value;
  const ok = lama === 'Admin123'
    && baru.length >= 8 && /[A-Z]/.test(baru) && /[a-z]/.test(baru) && /[0-9]/.test(baru)
    && baru === konfirm;
  document.getElementById('btnSubmit').disabled = !ok;
}

// SUBMIT
function doSubmit() {
  document.getElementById('formState').style.display = 'none';
  document.getElementById('successState').style.display = 'block';
  document.getElementById('tipsCard').style.display = 'none';
}
</script>
</body>
</html>
